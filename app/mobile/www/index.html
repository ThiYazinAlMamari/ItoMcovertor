<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0891b2">
    <meta name="format-detection" content="telephone=no">

    <title>ItoMcovertor</title>

    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Apply theme immediately -->
    <script>
        (function () {
            try {
                var settings = JSON.parse(localStorage.getItem('itom_mobile_settings') || '{}');
                var isDark = false;
                if (typeof settings.darkMode === 'boolean') {
                    isDark = settings.darkMode;
                } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    isDark = true;
                }
                if (isDark) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                }
            } catch (e) { }
        })();
    </script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <a href="index.html" class="navbar-brand">
                    <img src="logo.svg" alt="ItoMcovertor Logo" class="navbar-logo">
                    <span class="navbar-title">ItoMcovertor</span>
                </a>

                <span class="logo-text">ItoMcovertor</span>
            </div>
            <button class="theme-toggle" id="themeToggle" title="Toggle theme" aria-label="Toggle dark mode">
                <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5" />
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                </svg>
                <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Converter -->
    <main class="main-content">
        <!-- Category Selector -->
        <div class="category-selector">
            <select title="Select category" id="categorySelect" class="category-dropdown">
                <option value="length">Length</option>
                <option value="area">Area</option>
                <option value="volume-liquid">Volume (Liquid)</option>
                <option value="volume-solid">Volume (Solid)</option>
                <option value="mass">Mass</option>
                <option value="temperature">Temperature</option>
                <option value="speed">Speed</option>
                <option value="pressure">Pressure</option>
                <option value="energy">Energy</option>
                <option value="power">Power</option>
                <option value="force">Force</option>
                <option value="nautical">Nautical</option>
            </select>
        </div>

        <!-- Converter Card -->
        <div class="converter-card">
            <!-- From Section -->
            <div class="converter-section">
                <label class="section-label" for="fromValue">From</label>
                <input type="number" id="fromValue" class="value-input" placeholder="Enter value" step="any"
                    inputmode="decimal" autocomplete="off">
                <div class="unit-select-wrapper">
                    <select title="Select unit" id="fromUnit" class="unit-select"></select>
                </div>
            </div>

            <!-- Swap Button -->
            <button class="swap-btn" id="swapBtn" aria-label="Swap units">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8v12M17 20l4-4M17 20l-4-4" />
                </svg>
            </button>

            <!-- To Section -->
            <div class="converter-section">
                <label class="section-label" for="toValue">To</label>
                <div class="result-wrapper">
                    <input type="text" id="toValue" class="value-input result" readonly placeholder="Result">
                    <button class="copy-btn" id="copyBtn" aria-label="Copy result">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                    </button>
                </div>
                <div class="unit-select-wrapper">
                    <select title="Select unit" id="toUnit" class="unit-select"></select>
                </div>
            </div>

            <!-- Quick Reference -->
            <div class="quick-reference" id="quickReference"></div>
        </div>

        <!-- History Panel -->
        <section class="history-panel">
            <div class="history-header">
                <h2>History</h2>
                <button class="clear-btn" id="clearHistoryBtn">Clear</button>
            </div>
            <ul class="history-list" id="historyList">
                <li class="history-empty">No conversions yet</li>
            </ul>
        </section>
    </main>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="js/converter.js"></script>
    <script src="js/app.js"></script>
</body>

</html>